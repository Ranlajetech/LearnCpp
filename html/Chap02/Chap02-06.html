<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>
        2.6 -- 函数的用处, 以及如何高效使用
    </title>

    <link rel="stylesheet" href="../../css/main.css"/>
    <link rel="stylesheet" href="../../css/highlightjs.css">
    <link rel="stylesheet" href="../../css/linenumbercool.css"/>
    <script src="../../script/highlight.js"></script>
    <script src="../../script/highlight-cpp.js"></script>
    <script src="../../script/highlightjs-line-numbers.js"></script>
    <script>hljs.highlightAll();</script>
    <script>hljs.initLineNumbersOnLoad({singleLine: true});</script>
</head>

<body>
<h1>
    2.6 -- 函数的用处, 以及如何高效使用
</h1>
<p>
    学过函数是什么以及它的基本功能之后，现在来讨论它为什么有用。
</p>
<h2>
    为什么要使用函数
</h2>
<p>
    新程序员经常会问：就不能把所有代码都放到 <code class="inline">main</code> 函数里吗？对于简单的函数来说，完全可以。但当程序的长度与复杂度并不简单时，函数提供的许多好处使它变得极其有用。
</p>
<ul>
    <li><span style="text-decoration: underline;">组织度</span> -- 随着程序复杂度的增加，把所有代码都放在 <code class="inline">main()</code> 函数中会变得越来越复杂。函数就像迷你程序，可以与主程序分开写，编写时不需要考虑程序的其他部分。这样，我们就能将复杂的程序缩减为更小、更易于管理的区块，从而降低程序整体的复杂度。</li>
    <li><span style="text-decoration: underline;">复用性</span> -- 编写完成的函数可在程序中多次调用。这避免了代码重复（“不要重复自己”），而且极大降低了复制/粘贴错误的概率。函数还可以与其他程序共享，减少每次都要从头开始编写（并重新测试）的代码量。</li>
    <li><span style="text-decoration: underline;">易于测试</span> -- 因为函数减少了代码冗余，所以首先要测试的代码就少了。此外，由于函数是自包含的，因此函数通过测试确保能正常工作后，只要不做修改就不用再测试它了。这减少了我们一次需要测试的代码量，从而更容易发现错误（或从一开始就避免错误）。</li>
    <li><span style="text-decoration: underline;">扩展性</span> -- 当需要扩展程序以处理它之前无法处理的情况时，使用函数就只需要修改一个地方，之后每次调用函数时更改都会生效。</li>
    <li><span style="text-decoration: underline;">抽象性</span> -- 使用函数只需要知道它的名称、输入、输出与位置，不需要知道它如何工作，也不需要知道使用它还需要依赖哪些代码。这就降低了使用他人代码（包括标准库中的所有代码）所需的知识量。</li>
</ul>
<h2>
    高效使用函数
</h2>
<p>
    新程序员遇到的最大挑战之一（除了学习语言）就是了解何时以及如何高效使用函数。以下是编写函数的几条基本准则：
</p>
<ul>
    <li>在程序中多次出现的语句组一般都应写成函数。例如，如果以相同的方式多次读取用户输入，这就非常适合使用函数。如果在多个地方以相同的方式输出某些内容，这也很适合使用函数。</li>
    <li>输入输出有明确定义的代码适合写成函数（尤其是复杂的代码）。例如，如果有个要排序的列表，那么做排序的代码会是一个很好的函数，即使只排序一次。输入是未排序的列表，输出是已排序的列表。另一个适合使用函数的情形是模拟掷骰子的代码。当前程序可能只在一个地方用到它，但如果写成一个函数，就可以在以后扩展程序时或在未来的程序中重复使用。</li>
    <li>函数一般只完成一个任务。</li>
    <li>函数过长、过于复杂、难以理解时，就应该拆成多个小函数。这叫做 <strong>重构</strong>（<strong>refactorizing</strong>）。在 <a href="../Chap03/Chap03-10.html" target="_blank">3.10 -- 在发生错误之前找到漏洞</a> 一节中会更深入地讨论重构。</li>
</ul>
<p>
    一般来说，学习 C++ 的过程中，会写很多程序包括以下三个子任务：
</p>
<ol>
    <li>从用户处获取输入</li>
    <li>使用输入计算值</li>
    <li>显示计算结果</li>
</ol>
<p>
    对于简短的程序（一般少于 20 行代码），其中一些任务甚至全部任务都可以放到 <code class="inline">main()</code> 函数中。但对于更长的程序（或作为练习），每个任务都可以作为一个单独的函数来编写。
</p>
<p>
    新程序员通常会将计算值和显示计算值合并为一个函数。然而，这违反了函数的“单任务”原则。计算值的函数应将计算值返回给调用者，并由调用者决定如何处理计算值（例如调用另一个函数显示计算值）。
</p>
<hr/>
<nav>
    <a href="Chap02-07.html">[ 下一课：2.7 -- 前向声明与定义 ]</a><br/>
    <a href="../../index.html" target="_blank">[ 目录 ]</a><br/>
    <a href="https://www.learncpp.com/cpp-tutorial/why-functions-are-useful-and-how-to-use-them-effectively/" target="_blank">[ 原文地址 ]</a><br/>
    <a href="Chap02-05.html">[ 上一课：2.5 -- 局部作用域简介 ]</a>
</nav>
</body>
</html>